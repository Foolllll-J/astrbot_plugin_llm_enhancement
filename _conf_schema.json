{
    "group_whitelist": {
        "description": "群聊白名单",
        "hint": "仅在群聊白名单里的群启用本插件功能，不填表示所有群聊都启用。",
        "type": "list",
        "default": []
    },
    "group_blacklist": {
        "description": "群聊黑名单",
        "hint": "屏蔽黑名单中的群聊，该群消息无法唤醒bot(bot管理员不受影响)。",
        "type": "list",
        "default": []
    },
    "intelligent_wake": {
        "type": "object",
        "description": "智能唤醒",
        "hint": "配置智能唤醒相关参数",
        "items": {
            "request_cd": {
                "description": "请求CD(秒)",
                "hint": "防止频繁发送LLM请求的冷却时间。距离上次发送请求小于此时间的所有消息会被阻止。设为0时关闭检测。",
                "type": "float",
                "default": 1.0
            },
            "merge_delay": {
                "description": "合并延迟(秒)",
                "hint": "用户快速连续发送多条消息时，等待此时间后合并为一条发送给 LLM。设为 0 时关闭合并。",
                "type": "float",
                "default": 10.0
            },
            "merge_max_count": {
                "description": "合并数量上限",
                "hint": "单次最多可合并的消息条数，超过上限后将停止继续收集。",
                "type": "int",
                "default": 5
            },
            "merge_multi_user": {
                "description": "允许合并多人消息",
                "hint": "开启后，合并延迟期间若有其他群成员发送消息，也会被一并收集。消息格式将变为“[昵称]: 消息内容”。",
                "type": "bool",
                "default": false
            },
            "wake_extend": {
                "description": "唤醒延长(秒)",
                "hint": "LLM 响应后，在此时间窗口内可继续维持唤醒状态。设为 0 时关闭。",
                "type": "float",
                "default": 30.0
            },
            "wake_extend_same_user_only": {
                "description": "唤醒延长仅对原用户生效",
                "hint": "开启后，唤醒延长窗口内仅处理上次触发请求的用户消息，忽略其他用户。",
                "type": "bool",
                "default": true
            },
            "wake_extend_similarity": {
                "description": "唤醒延长相关性阈值",
                "hint": "唤醒延长期间，当前消息与上文的相关性阈值。降低阈值可更容易保持对话连续性。",
                "type": "float",
                "default": 0.1
            },
            "wake_extend_provider_id": {
                "description": "唤醒延长判定 Provider ID",
                "type": "string",
                "_special": "select_provider",
                "default": "",
                "hint": "留空时不启用模型判定。配置后会让该模型仅输出 T/F，用于判断是否继续响应。"
            },
            "mention_wake": {
                "description": "提及唤醒的昵称",
                "hint": "提及到bot的昵称时，唤醒bot。不填时关闭提及检测。",
                "type": "list",
                "default": []
            },
            "relevant_wake": {
                "description": "相关性唤醒阈值",
                "hint": "当前消息与上文bot的消息相关性大时，唤醒bot。降低阈值可更容易唤醒，保持对话连续性。设为0时关闭检测。",
                "type": "float",
                "default": 0.71
            },
            "ask_wake": {
                "description": "答疑唤醒阈值",
                "hint": "当群里有人问专业性问题时，唤醒bot。建议阈值高一点，日常聊天疑问句出现的频率非常高。设为0时关闭检测。",
                "type": "float",
                "default": 0.88
            },
            "shutup": {
                "description": "闭嘴检测阈值",
                "hint": "有人感觉bot太多话时，bot自动闭嘴一段时间。低阈值更容易让bot闭嘴。设为0时关闭检测。",
                "type": "float",
                "default": 0.69
            },
            "insult": {
                "description": "辱骂检测阈值",
                "hint": "有人辱骂bot时，bot自动沉默一段时间。低阈值更容易让bot沉默，玻璃心更重。设为0时关闭检测。",
                "type": "float",
                "default": 0.69
            },
            "silence_multiple": {
                "description": "沉默时间倍数",
                "hint": "触发bot沉默时的阈值（0~1） * 沉默时间倍数 = 沉默时间。",
                "type": "float",
                "default": 500
            },
            "prob_wake": {
                "description": "兜底唤醒概率",
                "hint": "上述所有唤醒机制都没能唤醒bot时，最后会按照此概率尝试唤醒bot。",
                "type": "float",
                "default": 0.0005
            },
            "wake_forbidden_words": {
                "description": "唤醒词屏蔽词",
                "hint": "唤醒词屏蔽词，如果用户输入的唤醒词包含这些词，则不会唤醒bot(bot管理员不受影响)。",
                "type": "list",
                "default": [
                    "政治",
                    "键证",
                    "党"
                ]
            },
            "block_builtin": {
                "description": "屏蔽内置指令",
                "hint": "内置指令即指Astrbot自带的命令，如help, tts, llm等，内置指令被屏蔽后不再会唤醒bot(bot管理员不受影响)。",
                "type": "bool",
                "default": false
            }
        }
    },
    "parse_switches": {
        "type": "object",
        "description": "解析总开关",
        "hint": "统一控制各类内容解析能力是否启用。",
        "items": {
            "video_parse_enable": {
                "description": "启用视频解析",
                "type": "bool",
                "default": true,
                "hint": "关闭后，不再执行视频与 GIF 的媒体增强解析。"
            },
            "forward_parse_enable": {
                "description": "启用聊天记录解析",
                "type": "bool",
                "default": true,
                "hint": "关闭后，不再解析聊天记录（转发消息）内容。"
            },
            "file_parse_enable": {
                "description": "启用文件解析",
                "type": "bool",
                "default": true,
                "hint": "关闭后，不再提取或注入引用消息中的文件信息。"
            },
            "json_parse_enable": {
                "description": "启用 JSON 卡片解析",
                "type": "bool",
                "default": true,
                "hint": "关闭后，不再提取引用消息中的 JSON 卡片关键信息（如分享卡片标题、摘要、链接）。"
            }
        }
    },
    "video_injection": {
        "type": "object",
        "description": "视频解析",
        "hint": "配置视频抽帧、语音识别和相关模型参数。",
        "items": {
            "video_max_size_mb": {
                "description": "视频大小上限（MB）",
                "hint": "单个视频超过该大小时将跳过解析。默认 50MB。",
                "type": "int",
                "default": 50
            },
            "video_frame_interval_sec": {
                "description": "抽帧间隔（秒）",
                "hint": "每隔 N 秒取 1 帧。间隔越小描述越细腻，但会消耗更多 Token 和时间。",
                "type": "int",
                "default": 12
            },
            "video_max_frame_count": {
                "description": "抽帧数量上限",
                "type": "int",
                "default": 10,
                "hint": "单个视频最多抽取的帧数。若根据抽帧间隔计算出的帧数超过此值，将自动调整间隔以匹配此上限。"
            },
            "video_sample_count": {
                "description": "视频抽帧数量",
                "type": "int",
                "default": 3,
                "hint": "当无法探测视频时长时，默认抽取该数量的帧。"
            },
            "video_asr_enable": {
                "description": "视频语音识别 (ASR)",
                "type": "bool",
                "default": true,
                "hint": "开启后，将提取视频音频并转写为文本，辅助模型理解视频内容。"
            },
            "asr_provider_id": {
                "description": "ASR 提供商 ID",
                "type": "string",
                "_special": "select_provider_stt",
                "hint": "留空时使用当前会话的 STT 提供商。"
            },
            "image_provider_id": {
                "description": "图片转述 Provider ID",
                "type": "string",
                "_special": "select_provider",
                "hint": "留空时自动选择具备图片能力的 Provider。"
            },
            "ffmpeg_path": {
                "description": "FFmpeg 路径",
                "hint": "FFmpeg 可执行文件路径，不填则自动尝试从系统环境变量中寻找。",
                "type": "string",
                "default": ""
            },
            "quote_self_video_block_prob": {
                "description": "引用 Bot 自身视频的请求屏蔽概率",
                "hint": "当引用 Bot 自身发送的视频消息时，按该概率屏蔽请求。",
                "type": "float",
                "slider": {
                    "min": 0,
                    "max": 1,
                    "step": 0.01
                },
                "default": 0
            }
        }
    },
    "forward_parsing": {
        "type": "object",
        "description": "聊天记录解析",
        "hint": "配置聊天记录解析的策略与限制。",
        "items": {
            "nested_parse_depth": {
                "description": "嵌套解析深度",
                "type": "int",
                "default": 5,
                "hint": "限制递归解析层数。"
            },
            "forward_message_max_count": {
                "description": "消息读取上限",
                "type": "int",
                "default": 50,
                "hint": "单次最多读取并解析的聊天记录内部消息条数。"
            },
            "forward_image_max_count": {
                "description": "图片注入上限",
                "type": "int",
                "default": 8,
                "hint": "单次聊天记录解析最多注入的图片数量，超出部分将被忽略。"
            },
            "forward_video_max_count": {
                "description": "最多处理视频数量",
                "type": "int",
                "default": 2,
                "hint": "单次聊天记录解析最多处理的视频条数。设为 0 时关闭聊天记录视频抽帧，仅保留视频占位符。"
            },
            "forward_video_max_frame_count": {
                "description": "聊天记录视频最多抽帧数量",
                "type": "int",
                "default": 1,
                "hint": "单个聊天记录视频最多抽取的帧数。设为 0 时关闭聊天记录视频抽帧，仅保留视频占位符。"
            },
            "quote_self_forward_block_prob": {
                "description": "引用 Bot 自身聊天记录的请求屏蔽概率",
                "hint": "当引用 Bot 自身发送的聊天记录消息时，按该概率屏蔽请求。",
                "type": "float",
                "slider": {
                    "min": 0,
                    "max": 1,
                    "step": 0.01
                },
                "default": 0
            }
        }
    },
    "file_parsing": {
        "type": "object",
        "description": "文件解析",
        "hint": "配置引用消息中的文件解析行为。",
        "items": {
            "inject_file_name": {
                "description": "注入文件名",
                "type": "bool",
                "default": true,
                "hint": "开启后，引用消息中的文件名会注入到上下文。"
            },
            "inject_file_text_length": {
                "description": "注入文件文本长度",
                "type": "int",
                "default": 0,
                "minimum": 0,
                "hint": "大于 0 时会读取可直接解析的文本文件并注入前 N 个字符；设为 0 表示关闭。"
            },
            "quote_self_file_block_prob": {
                "description": "引用 Bot 自身文件的请求屏蔽概率",
                "hint": "当引用 Bot 自身发送的文件消息时，按该概率屏蔽请求。",
                "type": "float",
                "slider": {
                    "min": 0,
                    "max": 1,
                    "step": 0.01
                },
                "default": 0
            }
        }
    },
    "blacklist": {
        "type": "object",
        "description": "黑名单",
        "hint": "黑名单管理配置，用于命令与 LLM 工具拉黑。",
        "items": {
            "max_blacklist_duration": {
                "type": "int",
                "default": 86400,
                "minimum": 0,
                "description": "黑名单最长时长（秒）",
                "hint": "仅对 LLM 工具生效。设置为 0 表示允许永久拉黑。"
            },
            "blacklist_block_commands": {
                "type": "bool",
                "default": true,
                "description": "黑名单是否拦截指令",
                "hint": "开启时在消息阶段拦截黑名单用户（包括指令）；关闭时放行指令处理，仅在 LLM 请求阶段拦截。"
            },
            "tool_write_require_admin": {
                "type": "bool",
                "default": false,
                "description": "写工具运行前权限校验",
                "hint": "默认关闭，交给 LLM 自行判断。开启后：禁言/拉黑仅允许管理员或目标为调用者本人；解除拉黑仅允许管理员。"
            }
        }
    }
}
